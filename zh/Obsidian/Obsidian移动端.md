# Obsidian 安卓端

Obsidian 安卓端正在进行[[移动端测试|封闭测试]]，因此目前我们仅能提供 APK 安装包。

## 我该如何同步笔记数据？

Obsidian 安卓端的数据储存在系统的文档（Documents）文件夹下。你可以使用[[Obsidian 同步服务]]来同步笔记数据，也可以使用任何第三方同步服务来同步这个文件夹。

### Obsidian 同步服务

与 Obsidian 桌面端一样，对于移动端我们也提供了[[Obsidian 同步服务]]。

要使用 Obsidian 同步服务来同步笔记数据，首先需要创建一个新的空白本地库。打开这个空白的本地库后，打开左边栏，点击 `设置` 按钮，然后像在桌面端使用同步服务一样进行设置：

1. 在 `账户` 页面登录 Obsidian 账号
2. 在 `核心插件` 页面启用 `同步` 插件
3. 选择需要连接的远程库，连接
4. 保持 APP 开启，直到数据同步完成。

如果想查看同步状态，唤起右边栏，然后你就可以看到和桌面端类似的同步状态图标。点击这个图标可以查看更多同步信息（点击则会显示同步日志）。

注意：如果你同时使用 Obsidian 同步服务与第三方同步服务，请让第三方同步服务忽略 `.obsidian/sync.json` 文件，否则 Obsidian 同步服务可能会崩溃。因为这个文件是用来确认当前设备数据的同步状态的，如果其被第三方同步服务同步到其他设备上，那么 Obsidian 同步服务将无法判断其他设备数据的同步状态。

### 第三方同步服务

你可以选择自己喜欢的第三方同步服务来在各设备间同步笔记数据。

比如你可以使用 [Dropsync](https://play.google.com/store/apps/details?id=com.ttxapps.dropsync) 或 [FolderSync](https://play.google.com/store/apps/details?id=dk.tacit.android.foldersync.lite)。

但是，我们并没有测试过这些同步服务。所以，如果你已通过它们成功同步笔记数据，请告诉我们，我们会将你的经验发布到这个教程里，以帮助更多用户。

## 我的库保存在哪里？

对于安卓端来说，Obsidian 的文件夹储存在系统的文档（Documents）文件夹下，路径为 `Documents/Obsidian`。文档文件夹通常保存在 SD 卡 或 `emulated storage` 中。

任何在 Obsidian 文件夹中的文件夹都会被视为库。所以，如果你将一个文件夹同步或复制到该目录下，你就能在 Obsidian 的库列表中看到它们。

# Obsidian iOS端

目前，iOS 端目前也处于[[移动端测试|封闭测试]]中，你可以通过 TestFlight 来下载使用。

## 我该如何同步笔记数据？

iOS 端允许你将笔记数据储存在本地或 iCloud 中。经测试，对于iOS 端，目前我们比较推荐的同步方式为 iCloud 同步和Obsidian 同步服务

可以同步 iOS 设备任意文件夹的第三方同步服务都可以用来同步笔记数据。但遗憾的是，我们并未找到这样的第三方同步服务。不像安卓，iOS 复杂的文件共享机制导致了任何一款 APP 的本地数据都难以被其他 APP 读取。因此，即便很多第三方同步服务能够将你的笔记数据同步到 iOS 系统上，Obsidian 也不能读取到你的笔记数据。

### Obsidian 同步服务

在 iOS 端使用 Obsidian 同步服务的步骤和[[#Obsidian 同步服务|安卓端]]一致。但需要注意的是，请确认本地库没有储存在 iCloud 中。毕竟目前我们不推荐 Obsidian 同步服务和 iCloud 同时使用，同时使用可能会产生文件冲突。

### 使用 iCloud 同步

要用 iCloud 同步库文件夹，首先要安装并打开 Obsidian iOS app。然后，系统会在 iCloud Drive 下自动创建一个名为 “Obsidian” 的文件夹，并且文件夹上有着 Obsidian 的 logo。需要注意，这是特殊的文件夹，这和你手动在 iCloud Drive 中创建的文件夹是不同的。

然后，在电脑上，将需要同步的库移动到 `iCloud Drive/Obsidian/` 这个路径下。这样，Obsidian 就能通过 iCloud Drive 中的特殊文件夹同步笔记数据了。

等 iCloud 同步完整个库后，再打开 Obsidian iOS 端，你就能看到被同步的库文件夹。这个文件夹上还会有一个云符号，表示其储存在 iCloud 中。

当你第一次在 Obsidian iOS 端打开这个库时，app 会卡顿一会，因为 Obsidian 需要让 iCloud 将库中所有文件下载到本地上。一旦数据下载完成，app 就会重新变得流畅。整个过程中你可能需要重新打开 app 几次。

### Working Copy

你也可以使用 Working Copy，借助 Git 来将笔记数据同步到 iOS 端。要使用 Working Copy，首先需要在本地创建一个空的库，然后在 "Setup Folder Sync" 中选择这个库文件夹。随后，你就可以通过 commit & push 的方式同步笔记数据了。

## 我的库保存在哪里？

如果你选择使用 iCloud 来同步库，那么库文件夹将储存在 iCloud Drive 下的 Obsidian 文件夹中。

如果你没有使用 iCloud 来同步库，那么库文件夹将储存在系统目录下的 Obsidian 文件夹中。自 iOS 端 v0.0.14 版本后， Obsidian 允许其他应用通过系统读取库文件夹。因此，像 Working Copy 这样的 APP 就能用于同步本地库了。

目前 Obsidian 仍不支持那些通过 FileProvider 提供虚拟文件系统的第三方同步服务。未来我们会尝试进行支持。

# 支持的第三方同步服务

许多用户会问为什么 Obsidian 移动端不支持他们习惯使用的第三方同步服务。这里我们简要说明一下。

Obsidian 不同于 1Writer 或 iA Writer 这样的 APP，Obsidian 是基于库的，而这些软件是基于单篇笔记的。Obsidian 的许多核心功能是建立在库的完整性上的，比如自动补全、图片嵌入、标签面板、反向链接，以及其他能在笔记间进行交互的功能。

相反，大多数 Markdown 笔记软件仅是打开单篇笔记，然后让用户编辑笔记，最后保存笔记。因此，它们仅需通过 API 向系统或第三方同步软件获取单个笔记文件的读写权限即可，而不需要获取整个库（特别是文件夹与子文件夹）的读写权限。

对于同步来说，大多数 Markdown 笔记软件仅需要在用户打开特定笔记时下载该笔记文件、用户点击保存时上传该文件的修改版即可。但 Obsidian 必须下载库中所有笔记文件，并且追踪每个文件的修改情况（举个简单的例子，修改一篇笔记的名字就可能影响许多笔记中的链接名称）。所以，我们需要一种可以监控文件改变的同步方案，以便文件的改变能及时同步到所有设备上。

想要通过第三方同步服务来满足这些要求几乎是不可能的。这也是为什么同步服务商不能提供很好的移动端的原因——这导致我们往往得使用非官方开发的同步 app，比如 DropSync 或 FolderSync。遗憾的是，由于 iOS 的文件机制， iOS 上并没有这类同步 app。
